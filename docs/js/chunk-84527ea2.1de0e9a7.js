(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84527ea2"],{"0fd9":function(t,e,r){"use strict";r("99af"),r("4160"),r("caad"),r("13d5"),r("4ec9"),r("b64b"),r("d3b7"),r("ac1f"),r("2532"),r("3ca3"),r("5319"),r("159b"),r("ddb0");var n=r("ade3"),a=r("5530"),c=(r("4b85"),r("2b0e")),s=r("d9f7"),o=r("80d2"),i=["sm","md","lg","xl"],u=["start","end","center"];function l(t,e){return i.reduce((function(r,n){return r[t+Object(o["E"])(n)]=e(),r}),{})}var d=function(t){return[].concat(u,["baseline","stretch"]).includes(t)},f=l("align",(function(){return{type:String,default:null,validator:d}})),p=function(t){return[].concat(u,["space-between","space-around"]).includes(t)},b=l("justify",(function(){return{type:String,default:null,validator:p}})),v=function(t){return[].concat(u,["space-between","space-around","stretch"]).includes(t)},j=l("alignContent",(function(){return{type:String,default:null,validator:v}})),g={align:Object.keys(f),justify:Object.keys(b),alignContent:Object.keys(j)},h={align:"align",justify:"justify",alignContent:"align-content"};function m(t,e,r){var n=h[t];if(null!=r){if(e){var a=e.replace(t,"");n+="-".concat(a)}return n+="-".concat(r),n.toLowerCase()}}var x=new Map;e["a"]=c["a"].extend({name:"v-row",functional:!0,props:Object(a["a"])(Object(a["a"])(Object(a["a"])({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:d}},f),{},{justify:{type:String,default:null,validator:p}},b),{},{alignContent:{type:String,default:null,validator:v}},j),render:function(t,e){var r=e.props,a=e.data,c=e.children,o="";for(var i in r)o+=String(r[i]);var u=x.get(o);return u||function(){var t,e;for(e in u=[],g)g[e].forEach((function(t){var n=r[t],a=m(e,t,n);a&&u.push(a)}));u.push((t={"no-gutters":r.noGutters,"row--dense":r.dense},Object(n["a"])(t,"align-".concat(r.align),r.align),Object(n["a"])(t,"justify-".concat(r.justify),r.justify),Object(n["a"])(t,"align-content-".concat(r.alignContent),r.alignContent),t)),x.set(o,u)}(),t(r.tag,Object(s["a"])(a,{staticClass:"row",class:u}),c)}})},"20f6":function(t,e,r){},"668b":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("a4d3"),r("e01a"),r("b636"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0");function n(t){var e;if("undefined"!==typeof Symbol){if(Symbol.asyncIterator&&(e=t[Symbol.asyncIterator],null!=e))return e.call(t);if(Symbol.iterator&&(e=t[Symbol.iterator],null!=e))return e.call(t)}throw new TypeError("Object is not async iterable")}},b345:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{id:"regular-tables",fluid:"",tag:"section"}},[r("base-v-component",{attrs:{heading:"Projects",subheading:"Be inventive..."}}),r("v-row",{staticClass:"mb-10",attrs:{align:"center",justify:"center"}},[r("v-col",{staticClass:"text-md-center",attrs:{cols:"4"}},[r("v-btn",{attrs:{"x-large":"",color:"secondary"},on:{click:t.toProjectForm}},[r("v-icon",{staticClass:"mr-3",attrs:{dark:""}},[t._v(" mdi-pencil-plus ")]),t._v(" Create New Project ")],1)],1)],1),r("v-row",t._l(t.projects,(function(e,n){return r("transition",{key:n,attrs:{name:"fade"}},[r("v-col",{attrs:{cols:"6"}},[r("base-material-card",{staticClass:"v-card-profile",attrs:{avatar:e.photoProjectURL,"delete-icon":"",loading:t.loading},on:{delete:function(r){return t.deleteProject(e)}}},[r("v-card-text",{staticClass:"text-center"},[r("h6",{staticClass:"display-1 mb-1 grey--text"},[t._v(" "+t._s(e.name)+" ")]),r("h4",{staticClass:"display-2 font-weight-light mb-3 black--text"},[t._v(" "+t._s(t.userData.prenom)+" "+t._s(t.userData.nom)+" ")]),r("p",{staticClass:"font-weight-light grey--text"},[t._v(" "+t._s(e.abstract)+" ")]),r("v-btn",{staticClass:"mr-5",attrs:{color:"primary",rounded:""},on:{click:function(r){return t.toEditProject(e)}}},[t._v(" Edit ")]),r("v-btn",{staticClass:"mr-0",attrs:{color:"primary",rounded:""},on:{click:function(r){return t.toDetailsProject(e)}}},[t._v(" En savoir plus ")])],1)],1)],1)],1)})),1)],1)},a=[],c=(r("99af"),r("4de4"),r("4160"),r("159b"),r("96cf"),r("1da1")),s=r("5530"),o=r("668b"),i=r("2591"),u=r("56d7"),l=r("2f62"),d={name:"Project",data:function(){return{loading:!1,projects:[]}},computed:{uid:function(){return this.$store.state.user.uid},userData:function(){return this.$store.state.userData}},mounted:function(){this.getProjects()},methods:Object(s["a"])({deleteProject:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.loading=!0,e.setUserProjects(e.userData.projects.filter((function(e){return t.uid!==e}))),r.next=4,u["firestore"].collection("projects").doc(t.uid).delete().then(Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.deleteFolderRecursive("users/".concat(e.uid,"/projects/").concat(t.uid));case 2:return r.next=4,u["firestore"].collection("users").doc(e.uid).update({projects:e.userData.projects}).then((function(){e.loading=!1,e.projects=e.projects.filter((function(e){return t.uid!==e.uid}))}));case 4:case"end":return r.stop()}}),r)}))));case 4:case"end":return r.stop()}}),r)})))()},deleteFile:function(t){return Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i["a"].storage().ref(t),e.next=3,r.delete();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},deleteFolderRecursive:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,a,c,s,u,l,d,f,p,b,v,j,g,h,m,x;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=i["a"].storage().ref(t),r.next=3,n.listAll();case 3:a=r.sent,c=!0,s=!1,r.prev=6,l=Object(o["a"])(a.items);case 8:return r.next=10,l.next();case 10:return d=r.sent,c=d.done,r.next=14,d.value;case 14:if(f=r.sent,c){r.next=22;break}return p=f,r.next=19,e.deleteFile(p.fullPath);case 19:c=!0,r.next=8;break;case 22:r.next=28;break;case 24:r.prev=24,r.t0=r["catch"](6),s=!0,u=r.t0;case 28:if(r.prev=28,r.prev=29,c||null==l.return){r.next=33;break}return r.next=33,l.return();case 33:if(r.prev=33,!s){r.next=36;break}throw u;case 36:return r.finish(33);case 37:return r.finish(28);case 38:b=!0,v=!1,r.prev=40,g=Object(o["a"])(a.prefixes);case 42:return r.next=44,g.next();case 44:return h=r.sent,b=h.done,r.next=48,h.value;case 48:if(m=r.sent,b){r.next=56;break}return x=m,r.next=53,e.deleteFolderRecursive(x.fullPath);case 53:b=!0,r.next=42;break;case 56:r.next=62;break;case 58:r.prev=58,r.t1=r["catch"](40),v=!0,j=r.t1;case 62:if(r.prev=62,r.prev=63,b||null==g.return){r.next=67;break}return r.next=67,g.return();case 67:if(r.prev=67,!v){r.next=70;break}throw j;case 70:return r.finish(67);case 71:return r.finish(62);case 72:case"end":return r.stop()}}),r,null,[[6,24,28,38],[29,,33,37],[40,58,62,72],[63,,67,71]])})))()},getProjects:function(){var t=this;this.userData.projects.forEach((function(e){u["firestore"].collection("projects").doc(e).get().then((function(r){if(r.exists){var n=r.data();n.uid=e,t.projects.push(n)}}))}))},toEditProject:function(t){this.$router.push({name:"ProjectForm",params:{project:t}})},toProjectForm:function(){this.$router.push({name:"ProjectForm"})},toDetailsProject:function(t){this.$router.push({name:"Project",params:{project:t}})}},Object(l["b"])({setUserProjects:"SET_PROJECTS"}))},f=d,p=r("2877"),b=r("6544"),v=r.n(b),j=r("8336"),g=r("99d9"),h=r("62ad"),m=r("a523"),x=r("132d"),y=r("0fd9"),w=Object(p["a"])(f,n,a,!1,null,null,null);e["default"]=w.exports;v()(w,{VBtn:j["a"],VCardText:g["b"],VCol:h["a"],VContainer:m["a"],VIcon:x["a"],VRow:y["a"]})},b636:function(t,e,r){var n=r("746f");n("asyncIterator")}}]);
//# sourceMappingURL=chunk-84527ea2.1de0e9a7.js.map